#实现这样一个程序：输入城市名，输出这个城市当日的天气情况（气温、风力等）
#首先需要安装 anaconda，熟悉 jupyter notebook 的用法；
#然后在 anaconda 中，安装 requests 库；
#在  jupyter notebook 中，利用 requests 库访问接口，实现功能
import requests

while True:
    print('请输入你要查询的城市名称：')
    city = input()
    if not city:
        break
    try:
        req = requests.get('http://wthrcdn.etouch.cn/weather_mini?city=%s' %city)
    except:
        print("查询失败")
        break
    dic_city = req.json()   #转换为字典
    city_data = dic_city.get('data')    #没有data的话返回None
    if city_data:
        city_forecast = city_data['forecast'][0]  #下面的都可以换成  '.get'  方法
        print(city_forecast.get('date'))
        print(city_forecast.get('high'))
        print(city_forecast.get('low'))
        print(city_forecast.get('type'))
    else:
        print('未获得数据')
